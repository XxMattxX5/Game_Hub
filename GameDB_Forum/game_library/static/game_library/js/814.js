"use strict";(self.webpackChunkgame_library=self.webpackChunkgame_library||[]).push([[814],{4745:(e,t,a)=>{var s=a(4994);t.A=void 0;var r=s(a(2032)),n=a(4848);t.A=(0,r.default)((0,n.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},2032:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s.createSvgIcon}});var s=a(4444)},8363:(e,t,a)=>{a.d(t,{A:()=>k});var s=a(8587),r=a(8168),n=a(6540),o=a(4164),i=a(4111),l=a(771),c=a(1848),m=a(9770),d=a(4409),p=a(2850),u=a(6606),g=a(2778),y=a(6852),_=a(7553);const A=(0,_.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const h=(0,_.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);const b=(0,_.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);var v=a(7245);function E(e){return(0,v.Ay)("MuiMenuItem",e)}const f=(0,_.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var x=a(4848);const N=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],C=(0,c.Ay)(u.A,{shouldForwardProp:e=>(0,m.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((({theme:e,ownerState:t})=>(0,r.A)({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${f.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,l.X4)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${f.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,l.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${f.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,l.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,l.X4)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${f.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${f.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${A.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${A.inset}`]:{marginLeft:52},[`& .${b.root}`]:{marginTop:0,marginBottom:0},[`& .${b.inset}`]:{paddingLeft:36},[`& .${h.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&(0,r.A)({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${h.root} svg`]:{fontSize:"1.25rem"}})))),k=n.forwardRef((function(e,t){const a=(0,d.A)({props:e,name:"MuiMenuItem"}),{autoFocus:l=!1,component:c="li",dense:m=!1,divider:u=!1,disableGutters:_=!1,focusVisibleClassName:A,role:h="menuitem",tabIndex:b,className:v}=a,f=(0,s.A)(a,N),k=n.useContext(p.A),w=n.useMemo((()=>({dense:m||k.dense||!1,disableGutters:_})),[k.dense,m,_]),$=n.useRef(null);(0,g.A)((()=>{l&&$.current&&$.current.focus()}),[l]);const S=(0,r.A)({},a,{dense:w.dense,divider:u,disableGutters:_}),M=(e=>{const{disabled:t,dense:a,divider:s,disableGutters:n,selected:o,classes:l}=e,c={root:["root",a&&"dense",t&&"disabled",!n&&"gutters",s&&"divider",o&&"selected"]},m=(0,i.A)(c,E,l);return(0,r.A)({},l,m)})(a),I=(0,y.A)($,t);let O;return a.disabled||(O=void 0!==b?b:-1),(0,x.jsx)(p.A.Provider,{value:w,children:(0,x.jsx)(C,(0,r.A)({ref:I,role:h,tabIndex:O,component:c,focusVisibleClassName:(0,o.A)(M.focusVisible,A),className:(0,o.A)(M.root,v)},f,{ownerState:S,classes:M}))})}))},4444:(e,t,a)=>{a.r(t),a.d(t,{capitalize:()=>r.A,createChainedFunction:()=>n,createSvgIcon:()=>o.A,debounce:()=>i.A,deprecatedPropType:()=>l,isMuiElement:()=>c.A,ownerDocument:()=>m.A,ownerWindow:()=>d.A,requirePropFactory:()=>p,setRef:()=>u,unstable_ClassNameGenerator:()=>E,unstable_useEnhancedEffect:()=>g.A,unstable_useId:()=>y,unsupportedProp:()=>_,useControlled:()=>A.A,useEventCallback:()=>h.A,useForkRef:()=>b.A,useIsFocusVisible:()=>v.A});var s=a(2067),r=a(8466);const n=a(9941).A;var o=a(5003),i=a(1935);const l=function(e,t){return()=>null};var c=a(5602),m=a(6248),d=a(3749);a(8168);const p=function(e,t){return()=>null};const u=a(3721).A;var g=a(2778);const y=a(4953).A;const _=function(e,t,a,s,r){return null};var A=a(7548),h=a(3034),b=a(6852),v=a(873);const E={configure:e=>{s.A.configure(e)}}},3814:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var s=a(6540),r=a(8267),n=a(8239),o=a(4073),i=a(7059),l=a(6990),c=a(7767),m=a(4976),d=a(6179),p=a(8027),u=a(4147),g=a(1083),y=a(8987);function _(){const{logoutUser:e,authenticated:t}=(0,u.A)(),a=(0,c.g)(),_=(0,c.zy)(),A=(0,c.Zp)(),[h,b]=(0,s.useState)({}),[v,E]=(0,s.useState)([]),[f,x]=(0,s.useState)(""),[N,C]=(0,s.useState)(""),[k,w]=(0,s.useState)("sort_by"),[$,S]=(0,s.useState)(null);(0,s.useEffect)((()=>{M()}),[_.pathname]);const M=async()=>{try{const e=await g.A.get(`/api/post/?type=${a.type}&id=${a.id}`);b(e.data.post),E(e.data.comments)}catch(e){throw new Error("Post not found")}},I=e=>e="Posted "+(e=(0,d.B)(new Date(e),{addSuffix:!1}))+" ago",O=e=>{C(e.target.value)};return s.createElement(n.Ay,{container:!0},s.createElement(r.A,{searchMessage:"general"==a.type?"Search For General Posts":"Search For Game Posts",sortCallBack:e=>{w(e)},searchClickCallBack:e=>{A(`/forum/${a.type}/?page=1&search=${e}`)},sortOpts:[{value:"sort_by",text:"Sort By"},{value:"title",text:"Title"},{value:"created_at",text:"Created"}],suggestionType:"general"==a.type?"generalposts":"gameposts"}),s.createElement(n.Ay,{item:!0,xs:6,id:"post_content_box"},s.createElement(m.N_,{to:`/forum/${a.type}`,id:"go_back_link"},s.createElement(p.Tsg,{size:50,color:"#1976D2"}),s.createElement(o.A,{marginLeft:"10px",color:"#1976d2"},"Go Back")),s.createElement(n.Ay,{item:!0,xs:12,className:"post"},s.createElement(n.Ay,{item:!0,xs:12,className:"post_head"},s.createElement(n.Ay,{item:!0,xs:12,className:"post_headers"},s.createElement(o.A,{className:"post_username"},h?h.author_username:""),h?s.createElement("span",{className:"post_header_divider"},"|"):null,s.createElement(o.A,{className:"post_created"},h.created_at?I(h.created_at):""),h.game?s.createElement("span",{className:"post_header_divider"},"|"):null,s.createElement(n.Ay,{item:!0,className:"post_game"},"games"==a.type?s.createElement(o.A,{className:"post_game_name"},h.game?h.game.name:""):null,h.game?s.createElement(m.N_,{to:`/game/${h.game.game_id}`},s.createElement(n.Ay,{item:!0,display:"flex",className:"post_game_info"},s.createElement("img",{className:"post_game_image",src:h.game.cover_url?h.game.cover_url:"/static/game_library/images/no_image_found.webp"}),s.createElement(o.A,{className:"post_game_text"},(h.game.storyline?h.game.storyline:h.game.summary)?h.game.storyline?h.game.storyline:h.game.summary:"No Storyline/Summary"))):null,s.createElement(n.Ay,{item:!0}))),s.createElement(n.Ay,{item:!0,xs:12},s.createElement(o.A,{className:"post_title"},h?h.title:""))),s.createElement(n.Ay,{item:!0,xs:12,className:"post_text"},s.createElement(o.A,{variant:"p"},h?h.text:""))),s.createElement(n.Ay,{item:!0,xs:12,id:"post_comment_box"},s.createElement(n.Ay,{item:!0,xs:12,id:"post_make_comment"},t?s.createElement(n.Ay,{item:!0,className:"post_comment_reply_box"},s.createElement(i.A,{className:"post_comment_input",multiline:!0,label:"Enter your comment",fullWidth:!0,sx:{backgroundColor:"white",borderRadius:"8px","& .MuiInputBase-root":{paddingRight:"60px"}},value:f,onChange:e=>{x(e.target.value)}}),s.createElement(l.A,{className:"post_comment_submit",onClick:()=>(async t=>{if(f)try{await g.A.post("/api/add_comment/",{post_type:a.type,post_id:t,comment:f},{headers:{"Content-Type":"application/json","X-CSRFToken":y.A.get("csrftoken")}}),x(""),M()}catch(t){if(401!==t.response.status)throw new Error("Failed to add comment");e()}})(h.id)},s.createElement(p.$bi,{color:"black",size:35}))):s.createElement(o.A,{variant:"h5",color:"white"},"You must be signed in to comment")),s.createElement(n.Ay,{item:!0,xs:12,id:"post_comments"},v.map((a=>s.createElement(n.Ay,{item:!0,xs:12,key:a.id,className:"post_comment"},s.createElement(n.Ay,{item:!0,className:"post_comment_header"},s.createElement(o.A,{className:"post_username"},a.author_username),s.createElement("span",{className:"post_header_divider"},"|"),s.createElement(o.A,{className:"post_created"},I(a.created_at)),s.createElement("span",{className:"post_header_divider"},"|"),s.createElement(l.A,{className:"post_reply_button",onClick:()=>S(a.id)},s.createElement(o.A,null,"Reply"))),s.createElement(o.A,{variant:"p",className:"post_comment_text"},a.text),s.createElement(n.Ay,{item:!0,className:"post_reply_input",style:{display:$==a.id?"block":"none"}},t?s.createElement(n.Ay,{item:!0,className:"post_comment_reply_box"},s.createElement(i.A,{className:"post_comment_input",multiline:!0,label:`Reply to ${a.author_username}`,fullWidth:!0,sx:{backgroundColor:"white",borderRadius:"8px","& .MuiInputBase-root":{paddingRight:"60px"}},value:N,onChange:O}),s.createElement(l.A,{className:"post_comment_submit",onClick:()=>(async t=>{if(N)try{await g.A.post("/api/add_reply/",{comment_id:t,reply:N},{headers:{"Content-Type":"application/json","X-CSRFToken":y.A.get("csrftoken")}}),C(""),M()}catch(t){if(401!==t.response.status)throw new Error("Failed to add reply");e()}})(a.id)},s.createElement(p.$bi,{color:"black",size:35}))):s.createElement(o.A,{variant:"h5",color:"white"},"You must be signed in to comment")),a.replies.map((e=>s.createElement(n.Ay,{item:!0,xs:11,key:e.id,className:"post_reply"},s.createElement(n.Ay,{item:!0,className:"post_reply_header"},s.createElement(o.A,{className:"post_username"},e.author_username),s.createElement("span",{className:"post_header_divider"},"|"),s.createElement(o.A,{className:"post_created"},I(e.created_at))),s.createElement(o.A,{variant:"p",className:"post_comment_text"},e.text)))))))))))}},8267:(e,t,a)=>{a.d(t,{A:()=>g});var s=a(6540),r=a(7767),n=a(4976),o=a(8239),i=a(4073),l=a(7059),c=a(5780),m=a(8363),d=a(1641),p=a(4745),u=a(1083);function g(e){const t=(0,r.zy)();let a=new URLSearchParams(t.search);const[g,y]=(0,s.useState)(""),_=e.suggestionType?"generalposts"==e.suggestionType?"general":"games":"game",[A,h]=(0,s.useState)(a.get("sort")?a.get("sort"):"sort_by"),b=e.sortOpts?e.sortOpts:{},v=e.searchMessage?e.searchMessage:"",[E,f]=(0,s.useState)([]);(0,s.useEffect)((()=>{x()}),[g,t.pathname]);const x=async()=>{if(!g)return void f([]);let e;e="games"==_||"general"==_?`/api/get_suggestions/${g}?type=${_}`:`/igdb/get_suggestions/${g}`;try{const t=await u.A.get(e);f(t.data)}catch(e){throw new Error("Failed to fetch suggestions")}};return s.createElement(o.Ay,{container:!0,id:"search_bar"},s.createElement(o.Ay,{item:!0,xs:3,id:"search_message_box"},s.createElement(i.A,{variant:"h4",id:"search_message"},v)),s.createElement(o.Ay,{item:!0,xs:8,id:"search_box"},s.createElement(o.Ay,{item:!0,xs:7,id:"search_input",sx:{"&:hover #suggestion_dropdown":{display:"block"}}},s.createElement(l.A,{fullWidth:!0,sx:{"& .MuiInputBase-input":{height:10},"&:focus-within + #suggestion_dropdown":{display:"block"}},placeholder:e.searchMessage?e.searchMessage:"",onChange:e=>{setTimeout((()=>(e=>{y(e.target.value)})(e)),500)}}),s.createElement(o.Ay,{item:!0,id:"suggestion_dropdown",zIndex:1},E.map((t=>s.createElement(o.Ay,{item:!0,key:"general"==_||"games"==_?t.id:t.game_id,className:"suggestion"},s.createElement(n.N_,{className:"suggestion_link",to:"general"==_||"games"==_?`/forum/general/post/${t.id}`:`/game/${t.game_id}`},e.suggestionType?null:s.createElement("img",{className:"suggestion_image",src:t.cover_url?t.cover_url:"/static/game_library/images/no_image_found.webp"}),s.createElement(i.A,{className:"suggestion_name"},e.suggestionType?t.title:t.name))))))),s.createElement(o.Ay,{item:!0,id:"search_button"},s.createElement(d.A,{size:"small",id:"search_button_icon",onClick:()=>{e.searchClickCallBack(g)}},s.createElement(p.A,null))),s.createElement(o.Ay,{item:!0,id:"sort_by"},s.createElement(c.A,{size:"small",fullWidth:!0,value:A,onChange:t=>{h(t.target.value),e.sortCallBack(t.target.value)}},b.map((e=>s.createElement(m.A,{key:e.value,value:e.value},e.text)))))))}}}]);